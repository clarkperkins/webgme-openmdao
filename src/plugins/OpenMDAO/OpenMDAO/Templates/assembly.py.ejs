# Auto-generated by the OpenMDAO plugin for WebGME
# Modify at your own risk

from openmdao.lib.datatypes.api import Float
from openmdao.main.api import Assembly
<%  for (var myPackage in uniqueImports) { %>
<%      if (uniqueImports.hasOwnProperty(myPackage)) { %>
from <%= myPackage %> import <%= uniqueImports[myPackage] %>
<%      } %>
<%  } %>

class <%= name %>(Assembly):

    # Assembly input variables (Assume float for now)
    <% inputs.forEach(function (input) { %>
    <%= input.name %> = Float(<%= input.value %>, iotype='in', units='<%= input.unit %>')
    <% }) %>

    def configure(self):
        <% if (driver) { %>
        # Driver
        self.add('driver', <%= driver.class_name %>())
        <% if (driver.class_name === 'DOEdriver') { %>
        self.driver.DOEgenerator = Uniform(1000)
        <% } %>
        <% } %>

        # Components
        <% components.forEach(function (component) { %>
        self.add('<%= component.name %>', <%= component.class_name %>())
        <% }) %>

        self.driver.workflow.add([
            <% components.forEach(function (component) { %>
            '<%= component.name %>',
            <% }) %>
        ])

        # Objectives
        <% objectives.forEach(function (objective) { %>
        self.driver.add_objective('<%= objective.name %>')
        <% }) %>

        # Responses
        <% responses.forEach(function (response) { %>
        self.driver.add_response('<%= response.name %>')
        <% }) %>

        # Parameters
        <% parameters.forEach(function (parameter) { %>
        self.driver.add_parameter('<%= parameter.name %>', low=<%= parameter.low %>, high=<%= parameter.high %>)
        <% }) %>

        # Connections
        <% connections.forEach(function (connection) { %>
        self.connect('<%= connection.from %>', '<%= connection.to %>')
        <% }) %>

        # Passthroughs
        <% passthroughs.forEach(function (passthrough) { %>
        self.create_passthrough('<%= passthrough.name %>')
        <% }) %>

if __name__ == '__main__':
    problem = <%= name %>()

    problem.run()

    print 'Optimized values:'

    <% parameters.forEach(function (parameter) { %>
    print '<%= parameter.name %>: {0}'.format(problem.<%= parameter.name %>)
    <% }) %>